<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Bridge Browser Demo</title>
        <meta name="keywords" content=""/>
        <meta name="description" content="This is auto-generated by sublime-custom-insert"/>
        <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
        <meta name="revised" value="yanni4night,2015/11/24"/>
        <script type="text/javascript">
        function $(selector){
            return document.querySelector(selector);
        }
        function showLog(msg){
            var p =document.createElement('p');
            p.innerHTML=msg;
            document.querySelector('#log').appendChild(p);
        }
        var state = 'pending';
        document.addEventListener('JsBridgeReady', function (evt) {
            state = JsBridge.readyState;
        });
        </script>
    </head>
    <body>
    <h1>DEMO</h1>

    <button id="version">版本</button>
    <pre id="log"></pre>
    </body>
    <script>
    window.HYBRID_INITIAL_DATA = {
        platform: 'android',
        version: '1.6.0',
        logid: 'NUSIDY(*GFD'
    };

    $('#version').addEventListener('click',function(){
        if(state === 'complete'){
            JsBridge.system.version().then(function(v){
                showLog('获取版本成功:' + v);
            },function(e){
                showLog('ERROR:' + e.message);
            });
        }
    },false);

    </script>
    <script src="server.dist.js"></script>
    <script src="bridge.dist.js"></script>
    <script>
        new ServerBridge('__js_bridge', 'scheme://');
        new NWBridge('__js_bridge', 'JsBridge','scheme://', HYBRID_INITIAL_DATA);
    </script>
</html>